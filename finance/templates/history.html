<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transaction History</title>
  <link href="../static/styles.css" rel="stylesheet">  <script>
    document.addEventListener("DOMContentLoaded", function() {
      fetch('/API_history') // Assuming your Flask server is serving the API at this endpoint
        .then(response => response.json())
        .then(data => {
          const container = document.querySelector('.container');
          const table = document.createElement('table');

          // Create table header
          const thead = document.createElement('thead');
          const headerRow = document.createElement('tr');
          ['Symbol', 'Amount', 'Price', 'Total', 'Transaction Date'].forEach(headerText => {
            const th = document.createElement('th');
            th.textContent = headerText;
            headerRow.appendChild(th);
          });
          thead.appendChild(headerRow);
          table.appendChild(thead);

          // Create table body
          // Create table body
            const tbody = document.createElement('tbody');
            data.transactions.forEach(transaction => {
                const row = document.createElement('tr');
                ['symbol', 'amount', 'price', 'total', 'date'].forEach(key => {
                    const cell = document.createElement('td');
                    if (key === 'date') {
                        const date = new Date(transaction[key]);
                        cell.textContent = date.toLocaleString();
                    } else if (key === 'amount' || key === 'price' || key === 'total') {
                        cell.textContent = parseFloat(transaction[key]).toFixed(4);
                    } else if (key === 'symbol') {
                        cell.textContent = transaction[key];
                    } else {
                        cell.textContent = "N/A"; // or another message indicating missing data
                    }
                    row.appendChild(cell);
                });
                tbody.appendChild(row);
            });
            table.appendChild(tbody);


          container.appendChild(table);
        })
        .catch(error => {
          console.error('Error fetching API:', error);
        });
    });
  </script>
</head>
<body>
  <div class="container">
    </div>
</body>
</html>