<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Nova Sbe Crypto Exchange</title>
  <link rel="stylesheet" href="../static/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-zmvONaEtH6XFvXQ5QjYzTEzU1f3AsqMrnQ11Pv1yJlXmHVznLtJTz8dpQxL5RFvVuXtMQDQyWJtFPQopC4v4Qg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    .navigation {
      text-align: center;
    }
    .nav-button {
      margin: 10px;
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        fetch('/API_portfolio') // Assuming your Flask server is serving the portfolio API at this endpoint
            .then(response => response.json())
            .then(data => {
                const container = document.querySelector('#positions');
                const table = document.createElement('table');
                table.className = 'center'; // Add center class to the table

                // Create table header
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                ['Coin', 'Amount', 'Price', 'Total'].forEach(headerText => {
                    const th = document.createElement('th');
                    th.textContent = headerText;
                    th.style.width = '300px';
                    headerRow.appendChild(th);
                });
                thead.appendChild(headerRow);
                table.appendChild(thead);

                // Create table body
                const tbody = document.createElement('tbody');

                // Iterate over portfolio items
                data.portfolio.forEach(item => {
                    const row = document.createElement('tr');
                    ['coin', 'amount', 'price_current', 'total_current'].forEach(key => {
                        const cell = document.createElement('td');
                        cell.textContent = item[key];
                        row.appendChild(cell);
                    });
                    tbody.appendChild(row);
                });

                // Add sum holdings row
                const sumHoldingsRow = document.createElement('tr');
                const sumHoldingsCell = document.createElement('td');
                sumHoldingsCell.textContent = 'Stock balance:';
                sumHoldingsRow.appendChild(sumHoldingsCell);
                sumHoldingsRow.innerHTML += '<td></td><td></td>'; // Empty cells for Shares and Price
                const sumHoldingsValueCell = document.createElement('td');
                sumHoldingsValueCell.textContent = data.sum_holdings.toFixed(2);
                sumHoldingsRow.appendChild(sumHoldingsValueCell);
                tbody.appendChild(sumHoldingsRow);

                // Add cash balance row
                const cashRow = document.createElement('tr');
                const cashCell = document.createElement('td');
                cashCell.textContent = 'Cash balance:';
                cashRow.appendChild(cashCell);
                cashRow.innerHTML += '<td></td><td></td>'; // Empty cells for Shares and Price
                const cashValueCell = document.createElement('td');
                cashValueCell.textContent = data.cash.cash.toFixed(2);
                cashRow.appendChild(cashValueCell);
                tbody.appendChild(cashRow);

                // Add total balance row
                const totalRow = document.createElement('tr');
                const totalCell = document.createElement('td');
                totalCell.textContent = 'Total balance:';
                totalRow.appendChild(totalCell);
                totalRow.innerHTML += '<td></td><td></td>'; // Empty cells for Shares and Price
                const totalValueCell = document.createElement('td');
                totalValueCell.textContent = data.total.toFixed(2);
                totalRow.appendChild(totalValueCell);
                tbody.appendChild(totalRow);

                table.appendChild(tbody);

                container.appendChild(table);
            })
            .catch(error => {
                console.error('Error fetching API:', error);
            });
    });
</script>
</head>
<body>
    <header>
        <div class="header-container">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/NovaSBE_Logo.svg/2560px-NovaSBE_Logo.svg.png" alt="Nova Sbe Logo" class="logo">
            <h1>Nova Sbe Crypto Exchange</h1>
            <div class="logout">
                <button class="logout-button">Logout</button>
            </div>
        </div>
    </header>
  <nav class="navigation">
    <a href="test.html" class="nav-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
      </svg> Account
    </a>
    <a href="searchcoins.html" class="nav-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
      </svg> Search Coins
    </a>
    <a href="transactionhistory.html" class="nav-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
        <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022zm2.004.45a7 7 0 0 0-.985-.299l.219-.976q.576.129 1.126.342zm1.37.71a7 7 0 0 0-.439-.27l.493-.87a8 8 0 0 1 .979.654l-.615.789a7 7 0 0 0-.418-.302zm1.834 1.79a7 7 0 0 0-.653-.796l.724-.69q.406.429.747.91zm.744 1.352a7 7 0 0 0-.214-.468l.893-.45a8 8 0 0 1 .45 1.088l-.95.313a7 7 0 0 0-.179-.483m.53 2.507a7 7 0 0 0-.1-1.025l.985-.17q.1.58.116 1.17zm-.131 1.538q.05-.254.081-.51l.993.123a8 8 0 0 1-.23 1.155l-.964-.267q.069-.247.12-.501m-.952 2.379q.276-.436.486-.908l.914.405q-.24.54-.555 1.038zm-.964 1.205q.183-.183.35-.378l.758.653a8 8 0 0 1-.401.432z"/>
        <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0z"/>
        <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5
        <path d="M7 9V3.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5V9h-2z"/>
    </svg> Transaction History
  </a>
  <a href="analytics.html" class="nav-button">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart-fill" viewBox="0 0 16 16">
      <path d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1z"/>
    </svg> Analytics
  </a>
</nav>
<main>
  <section class="specific-content">
    <p class="hello-user">Hello, <span id="account-name">John</span></p>
    <!-- Page specific content goes here -->
    <!-- For test.html, you can add the dashboard content here -->

    <h2>Dashboard</h2>
    <div id="positions">
      <!-- Dynamic content for positions will be inserted here -->
    </div>
  </section>
  <section class="sell-coins">
    <div class="sell-form">
      <input type="text" placeholder="Enter amount to sell">
      <button type="button" class="sell-button">Sell</button>
    </div>
  </section>
</main>
<footer>
  <p>&copy; 2023 Nova Sbe Crypto Exchange</p>
</footer>
</body>
</html>


<!--
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link href="../static/styles.css" rel="stylesheet">  
    <style>
        .center {
            margin-left: auto;
            margin-right: auto;
            text-align: left;
        }
        .center th, .center td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        .center th {
            background-color: #f2f2f2;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch('/API_portfolio') // Assuming your Flask server is serving the portfolio API at this endpoint
                .then(response => response.json())
                .then(data => {
                    const container = document.querySelector('.container');
                    const table = document.createElement('table');
                    table.className = 'center'; // Add center class to the table

                    // Create table header
                    const thead = document.createElement('thead');
                    const headerRow = document.createElement('tr');
                    ['Coin', 'Amount', 'Price', 'Total'].forEach(headerText => {
                        const th = document.createElement('th');
                        th.textContent = headerText;
                        th.style.width = '300px';
                        headerRow.appendChild(th);
                    });
                    thead.appendChild(headerRow);
                    table.appendChild(thead);

                    // Create table body
                    const tbody = document.createElement('tbody');

                    // Iterate over portfolio items
                    data.portfolio.forEach(item => {
                        const row = document.createElement('tr');
                        ['coin', 'amount', 'price_current', 'total_current'].forEach(key => {
                            const cell = document.createElement('td');
                            cell.textContent = item[key];
                            row.appendChild(cell);
                        });
                        tbody.appendChild(row);
                    });

                    // Add sum holdings row
                    const sumHoldingsRow = document.createElement('tr');
                    const sumHoldingsCell = document.createElement('td');
                    sumHoldingsCell.textContent = 'Stock balance:';
                    sumHoldingsRow.appendChild(sumHoldingsCell);
                    sumHoldingsRow.innerHTML += '<td></td><td></td>'; // Empty cells for Shares and Price
                    const sumHoldingsValueCell = document.createElement('td');
                    sumHoldingsValueCell.textContent = data.sum_holdings.toFixed(2);
                    sumHoldingsRow.appendChild(sumHoldingsValueCell);
                    tbody.appendChild(sumHoldingsRow);

                    // Add cash balance row
                    const cashRow = document.createElement('tr');
                    const cashCell = document.createElement('td');
                    cashCell.textContent = 'Cash balance:';
                    cashRow.appendChild(cashCell);
                    cashRow.innerHTML += '<td></td><td></td>'; // Empty cells for Shares and Price
                    const cashValueCell = document.createElement('td');
                    cashValueCell.textContent = data.cash.cash.toFixed(2);
                    cashRow.appendChild(cashValueCell);
                    tbody.appendChild(cashRow);

                    // Add total balance row
                    const totalRow = document.createElement('tr');
                    const totalCell = document.createElement('td');
                    totalCell.textContent = 'Total balance:';
                    totalRow.appendChild(totalCell);
                    totalRow.innerHTML += '<td></td><td></td>'; // Empty cells for Shares and Price
                    const totalValueCell = document.createElement('td');
                    totalValueCell.textContent = data.total.toFixed(2);
                    totalRow.appendChild(totalValueCell);
                    tbody.appendChild(totalRow);

                    table.appendChild(tbody);

                    container.appendChild(table);
                })
                .catch(error => {
                    console.error('Error fetching API:', error);
                });
        });
    </script>
</head>
<body>
    <div class="container">
        Table will be inserted here
    </div>
</body>
</html>

-->